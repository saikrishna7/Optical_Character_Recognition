% folder = 'C:\Mizzou works\Spring 2017\Intro to Machine learning and Pattern Recognition\Optical_Character_Recognition\74k_EnglishImgProcessed';
function classifier = DT_classifier()
    f=dir('74k_EnglishHndProcessed64/*.png');
    files={f.name};
    n = numel(files);
    images = zeros(n,64*64);
    for k=1:n
        img=imread(files{k});
        img = logical(img/255);
%         features = feature_extractor(img);
%         images(k,:) = features';
        images(k,:) = reshape(img,1,64*64);
    end
    X = images;
    
%% Commented
%     f=dir('AB/*.png');
%     files={f.name};
%     images = zeros(25,4096);
%     for k=1:numel(files)
%         img=imread(files{k});
%         img = logical(img/255);
%         images(k,:) = reshape(img,1,64*64);
%     end
%     X = images;
    
% [featureVector, hogVisualization] = extractHOGFeatures(X);    
    
%     numbers=uint8([ones(1,105)*0 ones(1,79)*1 ones(1,70)*2 ones(1,50)*3 ones(1,47)*4 ones(1,64)*5 ones(1,64)*6 ...
%         ones(1,48)*7 ones(1,32)*8 ones(1,34)*9]);

%     y = [repmat('0',1,105) repmat('1',1,79) repmat('2',1,70) repmat('3',1,50) repmat('4',1,47) ...
%         repmat('5',1,64) repmat('6',1,64) repmat('7',1,48) repmat('8',1,32) repmat('9',1,34) ...
%         repmat('A',1,558) repmat('B',1,115) repmat('C',1,215)...
%         repmat('D',1,191) repmat('E',1,446) repmat('F',1,79) repmat('G',1,143) repmat('H',1,193) ...
%         repmat('I',1,302) repmat('J',1,77) repmat('K',1,92) repmat('L',1,215) repmat('M',1,149) ...
%         repmat('N',1,363) repmat('O',1,382) repmat('P',1,159) repmat('Q',1,35) repmat('R',1,389) ...
%         repmat('S',1,342) repmat('T',1,312) repmat('U',1,92) repmat('V',1,84) repmat('W',1,67) ...
%         repmat('X',1,80) repmat('Y',1,67) repmat('Z',1,55) repmat('a',1,158) repmat('b',1,38) ...
%         repmat('c',1,63) repmat('d',1,46) repmat('e',1,227) repmat('f',1,37) repmat('g',1,36) ...
%         repmat('h',1,52) repmat('i',1,127) repmat('j',1,33) repmat('k',1,34) repmat('l',1,58) ...
%         repmat('m',1,43) repmat('n',1,135) repmat('o',1,148) repmat('p',1,37) repmat('q',1,54) ...
%         repmat('r',1,126) repmat('s',1,124) repmat('t',1,111) repmat('u',1,41) repmat('v',1,33) ...
%         repmat('w',1,36) repmat('x',1,35) repmat('y',1,43) repmat('z',1,35)];
%     y = reshape(y,7705,1);

% English Images
% y = uint8([ones(1,105)*48 ones(1,79)*49 ones(1,70)*50 ones(1,50)*51 ones(1,47)*52 ones(1,64)*53 ...
%         ones(1,64)*54 ones(1,48)*55 ones(1,32)*56 ones(1,34)*57 ones(1,558)*65 ...
%         ones(1,115)*66 ones(1,215)*67 ones(1,191)*68 ...
%         ones(1,446)*69 ones(1,79)*70 ones(1,143)*71 ones(1,193)*72 ones(1,302)*73 ...
%         ones(1,77)*74 ones(1,92)*75 ones(1,215)*76 ones(1,149)*77 ones(1,363)*78 ...
%         ones(1,382)*79 ones(1,159)*80 ones(1,35)*81 ones(1,389)*82 ones(1,342)*83 ...
%         ones(1,312)*84 ones(1,92)*85 ones(1,84)*86 ones(1,67)*87 ...
%         ones(1,80)*88 ones(1,67)*89 ones(1,55)*90 ones(1,158)*97 ones(1,38)*98 ...
%         ones(1,63)*99 ones(1,46)*100 ones(1,227)*101 ones(1,37)*102 ones(1,36)*103 ...
%         ones(1,52)*104 ones(1,127)*105 ones(1,33)*106 ones(1,34)*107 ones(1,58)*108 ...
%         ones(1,43)*109 ones(1,135)*110 ones(1,148)*111 ones(1,37)*112 ones(1,54)*113 ...
%         ones(1,126)*114 ones(1,124)*115 ones(1,111)*116 ones(1,41)*117 ones(1,33)*118 ...
%         ones(1,36)*119 ones(1,35)*120 ones(1,43)*121 ones(1,35)*122]);
%     y = reshape(y,7705,1);    
    
    % Hand written characters
    y = uint8([ones(1,50)*48 ones(1,50)*49 ones(1,50)*50 ones(1,50)*51 ones(1,50)*52 ones(1,50)*53 ...
        ones(1,50)*54 ones(1,50)*55 ones(1,50)*56 ones(1,50)*57 ones(1,50)*65 ...
        ones(1,50)*66 ones(1,50)*67 ones(1,50)*68 ...
        ones(1,50)*69 ones(1,50)*70 ones(1,50)*71 ones(1,50)*72 ones(1,50)*73 ...
        ones(1,50)*74 ones(1,50)*75 ones(1,50)*76 ones(1,50)*77 ones(1,50)*78 ...
        ones(1,50)*79 ones(1,50)*80 ones(1,50)*81 ones(1,50)*82 ones(1,50)*83 ...
        ones(1,50)*84 ones(1,50)*85 ones(1,50)*86 ones(1,50)*87 ...
        ones(1,50)*88 ones(1,50)*89 ones(1,50)*90 ones(1,50)*97 ones(1,50)*98 ...
        ones(1,50)*99 ones(1,50)*100 ones(1,50)*101 ones(1,50)*102 ones(1,50)*103 ...
        ones(1,50)*104 ones(1,50)*105 ones(1,50)*106 ones(1,50)*107 ones(1,50)*108 ...
        ones(1,50)*109 ones(1,50)*110 ones(1,50)*111 ones(1,50)*112 ones(1,50)*113 ...
        ones(1,50)*114 ones(1,50)*115 ones(1,50)*116 ones(1,50)*117 ones(1,50)*118 ...
        ones(1,50)*119 ones(1,50)*120 ones(1,50)*121 ones(1,50)*122]);
    y = reshape(y,n,1);    

    
%     English Font images
%     y = uint8([ones(1,100)*48 ones(1,100)*49 ones(1,100)*50 ones(1,100)*51 ones(1,100)*52 ones(1,100)*53 ...
%         ones(1,100)*54 ones(1,100)*100 ones(1,100)*56 ones(1,100)*57 ones(1,100)*65 ...
%         ones(1,100)*66 ones(1,100)*67 ones(1,100)*68 ...
%         ones(1,100)*69 ones(1,100)*70 ones(1,100)*71 ones(1,100)*72 ones(1,100)*73 ...
%         ones(1,100)*74 ones(1,100)*75 ones(1,100)*76 ones(1,100)*77 ones(1,100)*78 ...
%         ones(1,100)*79 ones(1,100)*80 ones(1,100)*81 ones(1,100)*82 ones(1,100)*83 ...
%         ones(1,100)*84 ones(1,100)*85 ones(1,100)*86 ones(1,100)*87 ...
%         ones(1,100)*88 ones(1,100)*89 ones(1,100)*90 ones(1,100)*97 ones(1,100)*98 ...
%         ones(1,100)*99 ones(1,100)*100 ones(1,100)*101 ones(1,100)*102 ones(1,100)*103 ...
%         ones(1,100)*104 ones(1,100)*105 ones(1,100)*106 ones(1,100)*107 ones(1,100)*108 ...
%         ones(1,100)*109 ones(1,100)*110 ones(1,100)*111 ones(1,100)*112 ones(1,100)*113 ...
%         ones(1,100)*114 ones(1,100)*115 ones(1,100)*116 ones(1,100)*117 ones(1,100)*118 ...
%         ones(1,100)*119 ones(1,100)*120 ones(1,100)*121 ones(1,100)*122]);
%     y = reshape(y,n,1);    
%%
%     y = [repmat('0',1,55) repmat('1',1,55) repmat('2',1,55) repmat('3',1,55) ...
%         repmat('4',1,55) ...
%         repmat('5',1,55) repmat('6',1,55) repmat('7',1,55) repmat('8',1,55) repmat('9',1,55) ...
%         repmat('A',1,55) repmat('B',1,55) repmat('C',1,55)...
%         repmat('D',1,55) repmat('E',1,55) repmat('F',1,55) repmat('G',1,55) repmat('H',1,55) ...
%         repmat('I',1,55) repmat('J',1,55) repmat('K',1,55) repmat('L',1,55) repmat('M',1,55) ...
%         repmat('N',1,55) repmat('O',1,55) repmat('P',1,55) repmat('Q',1,55) repmat('R',1,55) ...
%         repmat('S',1,55) repmat('T',1,55) repmat('U',1,55) repmat('V',1,55) repmat('W',1,55) ...
%         repmat('X',1,55) repmat('Y',1,55) repmat('Z',1,55) repmat('a',1,55) repmat('b',1,55) ...
%         repmat('c',1,55) repmat('d',1,55) repmat('e',1,55) repmat('f',1,55) repmat('g',1,55) ...
%         repmat('h',1,55) repmat('i',1,55) repmat('j',1,55) repmat('k',1,55) repmat('l',1,55) ...
%         repmat('m',1,55) repmat('n',1,55) repmat('o',1,55) repmat('p',1,55) repmat('q',1,55) ...
%         repmat('r',1,55) repmat('s',1,55) repmat('t',1,55) repmat('u',1,55) repmat('v',1,55) ...
%         repmat('w',1,55) repmat('x',1,55) repmat('y',1,55) repmat('z',1,55)
%         ];
%     y = reshape(y,n,1);


%% Training on fonts

%     y = [repmat('0',1,100) repmat('1',1,100) repmat('2',1,100) repmat('3',1,100) ...
%         repmat('4',1,100) ...
%         repmat('5',1,100) repmat('6',1,100) repmat('7',1,100) repmat('8',1,100) repmat('9',1,100) ...
%         repmat('A',1,100) repmat('B',1,100) repmat('C',1,100)...
%         repmat('D',1,100) repmat('E',1,100) repmat('F',1,100) repmat('G',1,100) repmat('H',1,100) ...
%         repmat('I',1,100) repmat('J',1,100) repmat('K',1,100) repmat('L',1,100) repmat('M',1,100) ...
%         repmat('N',1,100) repmat('O',1,100) repmat('P',1,100) repmat('Q',1,100) repmat('R',1,100) ...
%         repmat('S',1,100) repmat('T',1,100) repmat('U',1,100) repmat('V',1,100) repmat('W',1,100) ...
%         repmat('X',1,100) repmat('Y',1,100) repmat('Z',1,100) repmat('a',1,100) repmat('b',1,100) ...
%         repmat('c',1,100) repmat('d',1,100) repmat('e',1,100) repmat('f',1,100) repmat('g',1,100) ...
%         repmat('h',1,100) repmat('i',1,100) repmat('j',1,100) repmat('k',1,100) repmat('l',1,100) ...
%         repmat('m',1,100) repmat('n',1,100) repmat('o',1,100) repmat('p',1,100) repmat('q',1,100) ...
%         repmat('r',1,100) repmat('s',1,100) repmat('t',1,100) repmat('u',1,100) repmat('v',1,100) ...
%         repmat('w',1,100) repmat('x',1,100) repmat('y',1,100) repmat('z',1,100)
%         ];
%     y = reshape(y,n,1);


%%

    
%     y = [repmat('A',1,5) repmat('B',1,5) repmat('C',1,5) repmat('D',1,5) repmat('E',1,5)];
%     y=reshape(y,25,1);
    
% English Font images    
%     y = uint8([ones(1,1016)*48 ones(1,1016)*49 ones(1,1016)*50 ones(1,1016)*51 ones(1,1016)*52 ones(1,1016)*53 ...
%         ones(1,1016)*54 ones(1,1016)*55 ones(1,1016)*56 ones(1,1016)*57 ones(1,1016)*65 ...
%         ones(1,1016)*66 ones(1,1016)*67 ones(1,1016)*68 ...
%         ones(1,1016)*69 ones(1,1016)*70 ones(1,1016)*71 ones(1,1016)*72 ones(1,1016)*73 ...
%         ones(1,1016)*74 ones(1,1016)*75 ones(1,1016)*76 ones(1,1016)*77 ones(1,1016)*78 ...
%         ones(1,1016)*79 ones(1,1016)*80 ones(1,1016)*81 ones(1,1016)*82 ones(1,1016)*83 ...
%         ones(1,1016)*84 ones(1,1016)*85 ones(1,1016)*86 ones(1,1016)*87 ...
%         ones(1,1016)*88 ones(1,1016)*89 ones(1,1016)*90 ones(1,1016)*97 ones(1,1016)*98 ...
%         ones(1,1016)*99 ones(1,1016)*100 ones(1,1016)*101 ones(1,1016)*102 ones(1,1016)*103 ...
%         ones(1,1016)*104 ones(1,1016)*105 ones(1,1016)*106 ones(1,1016)*107 ones(1,1016)*108 ...
%         ones(1,1016)*109 ones(1,1016)*110 ones(1,1016)*111 ones(1,1016)*112 ones(1,1016)*113 ...
%         ones(1,1016)*114 ones(1,1016)*115 ones(1,1016)*116 ones(1,1016)*117 ones(1,1016)*118 ...
%         ones(1,1016)*119 ones(1,1016)*120 ones(1,1016)*121 ones(1,1016)*122]);
%     y = reshape(y,62992,1);    


    % Train and Predict Using a Single Classification Tree
    
%     mdl_ctree = fitctree(X,y);   % mdl_ctree = ClassificationTree.fit(Xtrain,Ytrain);
%     classifier=mdl_ctree;
% %      ypred = predict(mdl_ctree,Xtest);
%      Confmat_ctree = confusionmat(Ytest,ypred);

    % Confusion Matrices
%     figure,
%     heatmap(Confmat_ctree, 0:9, 0:9, 1,'Colormap','red','ShowAllTicks',1,'UseLogColorMap',true,'Colorbar',true);
%     title('Confusion Matrix: Single Classification Tree')

% CMdl = fitctree(X,y);
% classifier = CMdl;
% Ynew = predict(CMdl,mean(X))


    % Train and Predict Using Bagged Decision Trees
    mdl = fitensemble(X,y,'bag',200,'tree','type','Classification');
    classifier=mdl;
%     ypred = predict(mdl,Xtest);
%     Confmat_bag = confusionmat(Ytest,ypred);  


    % Confusion Matrices
%     figure,
%     heatmap(Confmat_bag, 0:9, 0:9, 1,'Colormap','red','ShowAllTicks',1,'UseLogColorMap',true,'Colorbar',true);
%     title('Confusion Matrix: Ensemble of Bagged Classification Trees')
end